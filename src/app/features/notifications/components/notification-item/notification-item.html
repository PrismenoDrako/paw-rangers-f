<article class="notification-card" [ngClass]="'notification-card--' + (notification.type || 'default')">
  <div
    class="notification-avatar"
    [ngClass]="[
      notification.type !== 'mascota' ? 'notification-avatar--icon' : '',
      notification.type !== 'mascota' ? 'notification-avatar--' + (notification.category || 'neutral') : ''
    ]">
    <ng-container *ngIf="notification.type === 'mascota' && notification.image; else avatarIcon">
      <img [src]="resolveImage(notification.image)" [alt]="notification.message" />
    </ng-container>

    <ng-template #avatarIcon>
      <ng-container [ngSwitch]="notification.category">
        <svg *ngSwitchCase="'alert'" class="avatar-icon" viewBox="0 0 48 48" aria-hidden="true">
          <circle cx="24" cy="24" r="20" fill="none" stroke="currentColor" stroke-width="3" />
          <path d="M24 14v12" stroke="currentColor" stroke-width="3" stroke-linecap="round" />
          <circle cx="24" cy="32" r="2" fill="currentColor" />
        </svg>
        <svg *ngSwitchCase="'found'" class="avatar-icon" viewBox="0 0 48 48" aria-hidden="true">
          <path d="M12 22c0-6 4-10 12-10s12 4 12 10-5 14-12 18C17 36 12 28 12 22Z" fill="none"
            stroke="currentColor" stroke-width="3" stroke-linejoin="round" />
        </svg>
        <svg *ngSwitchCase="'like'" class="avatar-icon" viewBox="0 0 48 48" aria-hidden="true">
          <path
            d="M24 41s-14-7.7-14-18a8 8 0 0 1 14-5.3A8 8 0 0 1 38 23c0 10.3-14 18-14 18Z"
            fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round" />
        </svg>
        <svg *ngSwitchCase="'reply'" class="avatar-icon" viewBox="0 0 48 48" aria-hidden="true">
          <path
            d="M40 12H12a6 6 0 0 0-6 6v9a6 6 0 0 0 6 6h4v7l8-7h16a6 6 0 0 0 6-6v-9a6 6 0 0 0-6-6Z"
            fill="none" stroke="currentColor" stroke-width="3" stroke-linejoin="round" stroke-linecap="round" />
        </svg>
        <svg *ngSwitchDefault class="avatar-icon" viewBox="0 0 48 48" aria-hidden="true">
          <circle cx="24" cy="24" r="20" fill="none" stroke="currentColor" stroke-width="3" />
          <path d="M24 16v10l6 4" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </ng-container>
    </ng-template>
  </div>

  <div class="notification-body">
    <div class="notification-body__head">
      <h4>{{ notification.message }}</h4>
    </div>

    <p class="notification-context" *ngIf="notification.context">
      {{ notification.context }}
    </p>

    <div class="notification-body__meta">
      <div class="meta-pill" *ngIf="notification.type === 'mascota'" [ngClass]="'meta-pill--' + (notification.category || 'neutral')">
        <ng-container [ngSwitch]="notification.category">
          <svg *ngSwitchCase="'alert'" class="meta-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M1.5 20.5h21L12 3.5 1.5 20.5z" fill="none" stroke="currentColor" stroke-width="1.8"
              stroke-linejoin="round" />
            <path d="M12 9v5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
            <circle cx="12" cy="17" r="1" fill="currentColor" />
          </svg>
          <svg *ngSwitchCase="'found'" class="meta-icon" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="14.5" r="3.2" fill="none" stroke="currentColor" stroke-width="1.6" />
            <circle cx="7.5" cy="10" r="1.8" fill="currentColor" />
            <circle cx="16.5" cy="10" r="1.8" fill="currentColor" />
            <circle cx="9.5" cy="7.5" r="1.4" fill="currentColor" />
            <circle cx="14.5" cy="7.5" r="1.4" fill="currentColor" />
          </svg>
          <svg *ngSwitchDefault class="meta-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 4a8 8 0 1 1-8 8" fill="none" stroke="currentColor" stroke-width="1.8"
              stroke-linecap="round" />
            <path d="M12 8v5l3 2" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </ng-container>

        <span class="meta-label">{{ notification.category | titlecase }}</span>
      </div>

      <div class="meta-pill meta-pill--time">
        <svg class="meta-icon" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="12" r="8" fill="none" stroke="currentColor" stroke-width="1.8" />
          <path d="M12 8v5l3 2" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        <span class="meta-label">{{ notification.timestamp }}</span>
      </div>
    </div>
  </div>
</article>
