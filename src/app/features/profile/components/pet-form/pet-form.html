<p-card [header]="isEditMode ? 'Editar Mascota' : 'Añadir Nueva Mascota'"
    styleClass="w-full shadow-lg rounded-xl border-2 border-primary-blue-500 surface-card">
    <form (ngSubmit)="savePet()" class="p-fluid grid form-layout">

        <div class="field col-12">
            <label for="name">Nombre</label>
            <input pInputText id="name" type="text" [(ngModel)]="petForm.name" name="name" required />
        </div>

        <div class="field col-12 md:col-6">
            <label for="species">Especie</label>
            <input pInputText id="species" type="text" [(ngModel)]="petForm.species" name="species" required />
        </div>

        <div class="field col-12 md:col-6">
            <label for="breed">Raza</label>
            <input pInputText id="breed" type="text" [(ngModel)]="petForm.breed" name="breed" required />
        </div>

        <div class="field col-12 select-button-container">
            <label>Género</label>
            <p-selectButton [options]="genderOptions" [(ngModel)]="petForm.gender" name="gender" optionLabel="label"
                optionValue="value" [allowEmpty]="false">
                <ng-template let-item pTemplate>
                    <i [class]="item.icon" class="mr-2"></i>
                    <span>{{item.label}}</span>
                </ng-template>
            </p-selectButton>
        </div>

        <div class="field col-12 md:col-6">
            <label for="age">Edad (años)</label>
            <p-inputNumber id="age" [(ngModel)]="petForm.age" name="age" [showButtons]="true" [min]="0"
                required></p-inputNumber>
        </div>

        <div class="field col-12 md:col-6">
            <label for="weight">Peso (kg)</label>
            <p-inputNumber id="weight" [(ngModel)]="petForm.weight" name="weight" [showButtons]="true" [min]="0"
                [maxFractionDigits]="2" required></p-inputNumber>
        </div>

        <div class="field col-12">
            <label for="fileUpload">Imagen de la Mascota</label>
            <p-fileUpload id="fileUpload" mode="basic" chooseLabel="Elegir Archivo" accept="image/*"
                maxFileSize="1000000" (onSelect)="onFileSelect($event)" [auto]="false" [showUploadButton]="false"
                [showCancelButton]="false">
            </p-fileUpload>
        </div>

        <div class="col-12 text-center mb-3">
            <img [src]="localImageUrl || 'https://placehold.co/200x200/294374/FFFFFF?text=Sin+Imagen'"
                alt="Imagen de la Mascota" class="preview-image shadow-md"
                onerror="this.onerror=null; this.src='https://placehold.co/200x200/294374/FFFFFF?text=Sin+Imagen';">
        </div>

        <div class="col-12 flex justify-content-center gap-2 mt-3">
            <p-button type="submit" [label]="isEditMode ? 'Guardar Cambios' : 'Añadir Mascota'" icon="pi pi-save"
                styleClass="p-button-primary p-button-raised"></p-button>
            <p-button type="button" label="Cancelar" icon="pi pi-times" styleClass="p-button-outlined"
                (onClick)="cancel()"></p-button>
        </div>
    </form>
</p-card>