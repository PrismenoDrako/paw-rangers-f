<app-auth-layout title="Iniciar Sesión">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-form login-form">
    <p class="error" *ngIf="error">{{ error }}</p>

    <div class="field">
      <label for="username">Nombre de Usuario</label>
      <div class="input-wrapper">
        <i class="pi pi-user"></i>
        <input
          id="username"
          pInputText
          type="text"
          formControlName="username"
          placeholder="Tu nombre de usuario"
          autocomplete="username"
          [ngClass]="{ 'ng-invalid ng-dirty': form.controls.username.touched && form.controls.username.invalid }"
        />
      </div>
      <small class="p-error" *ngIf="form.controls.username.touched && form.controls.username.invalid">
        Ingresa un nombre de usuario válido.
      </small>
    </div>

    <div class="field">
      <label for="password">Contraseña</label>
      <div class="input-wrapper">
        <i class="pi pi-lock"></i>
        <input
          id="password"
          pInputText
          type="password"
          formControlName="password"
          placeholder="Contraseña"
          autocomplete="current-password"
          [ngClass]="{ 'ng-invalid ng-dirty': form.controls.password.touched && form.controls.password.invalid }"
        />
      </div>
      <small class="p-error" *ngIf="form.controls.password.touched && form.controls.password.invalid">
        Mínimo 6 caracteres.
      </small>
    </div>

    <div class="helper-row helper-row--single">
      <a routerLink="/auth/register" class="link">¿Necesitas una cuenta?</a>
    </div>

    <div class="actions">
      <button class="primary-btn" type="submit" [disabled]="loading">
        <span *ngIf="loading">Entrando...</span>
        <span *ngIf="!loading">Iniciar Sesión</span>
      </button>
    </div>

    <p class="form-footer">
      ¿Olvidaste tu contraseña?
      <a routerLink="/auth/forgot-password">Recupérala</a>
    </p>
  </form>
</app-auth-layout>
